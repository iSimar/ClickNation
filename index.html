<!DOCTYPE HTML>

<html lang="en" style="width:100%;height:100%;">

<head>
	<audio id="audiotag1" src="http://puu.sh/f6vKd/4f9a6ea08d.mp3" preload="auto"></audio>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE-edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Clicknation is a nation... of clicking Nya nya nyaaaa">
    <meta name = "keywords" content = "Clicking">
	<meta name="author" content="Simar + Jake">
	<title> ClickNation </title>

	<link href="styles.css" rel="stylesheet">

	<script src='https://cdn.firebase.com/js/client/2.0.4/firebase.js'></script>
    <script src='https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js'></script>
    <script type="text/javascript" src="http://l2.io/ip.js?var=myip"></script>

</head>


<body style="width:100%;height:100%;">
 <div class="center" id="counter" style="font-family:arial;font-size:40px;width:100%;">
 	0
 </div>


<script>
hostIP = "";
	$(document).ready( function() {
		var vid = document.getElementById("audiotag1");
		hostIP = myip;
    getClicks();
	});

function getRandomColor() {
    var letters = '0123456789ABCDEF'.split('');
    var color = '#';
    for (var i = 0; i < 6; i++ ) {
        color += letters[Math.floor(Math.random() * 16)];
    }
    return color;
}
      var myDataRef = new Firebase('https://clicknation.firebaseio.com/clicks');
      $('html').click(function(e) {
        myDataRef.transaction(function(currentClicks) {
          return currentClicks+1;
        });
   		// myDataRef.push({ip: hostIP});
   		// alert("aadsads");
   		$('body').css("background-color", getRandomColor());
   		getClicks();
	  });


function getClicks(){
		vid.play();
	  	myDataRef.on('value', function(snapshot) {
   		// var count = 0;
   		// snapshot.forEach(function() {
     //   		count++;
   		// 	});
   		 $('#counter').text(snapshot.val());
       $('body').css("background-color", getRandomColor());
		});

	  }

myDataRef.on('child_added', function(snapshot) {
	getClicks();
});
    </script>

<style>
.center {
    position: absolute;
    width: 100px;
    height: 50px;
    top: 50%;
    left: 50%;
    margin-left: -50px; /* margin is -0.5 * dimension */
    margin-top: -25px; 
}â€‹
</style>


</body>
</html>
